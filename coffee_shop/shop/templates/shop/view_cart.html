{% extends 'shop/base.html' %}
{% load static %}
{% block title %}Your Cart{% endblock %}

{% block content %}
<h1 class="top-block">Ваша Корзина</h1>
<div class="cart-container">
    {% for item in cart.cartitem_set.all %}
    <div class="cart-item">
        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
        <div class="item-info">
            <h3>{{ item.product.name }}</h3>
            <p>₽{{ item.product.price }}</p>
        </div>
        <div class="item-quantity">
            <button class="btn-decrease">-</button>
            <span>{{ item.quantity }}</span>
            <button class="btn-increase">+</button>
        </div>
    </div>
    {% endfor %}
</div>
<div class="cart-summary">
    Итого: ₽{{ cart_total }}
</div>
<a href="{% url 'product_list' %}">Меню</a>

<!-- Кнопка оплатить -->
<button id="pay-button" class="btn-pay">Оплатить</button>

<!-- Форма для ввода данных карты (изначально скрыта) -->
<div id="payment-form" class="payment-form" style="display: none;">
    <h3>Введите данные карты</h3>
    <form id="card-form">
        <label for="card-number">Номер карты</label>
        <input type="text" id="card-number" name="card-number" required>

        <label for="expiry-date">Срок действия</label>
        <input type="text" id="expiry-date" name="expiry-date" placeholder="MM/YY" required>

        <label for="cvv">CVV</label>
        <input type="text" id="cvv" name="cvv" required>

        <button type="submit" class="btn-submit">Оплатить</button>
    </form>
</div>

<!-- Сообщение об успешной оплате -->
<div id="success-message" class="success-message" style="display: none;">
    Успешно, можете забрать ваш заказ здесь: <strong>адрес</strong>
</div>

<script>
document.getElementById('pay-button').addEventListener('click', function() {
    document.getElementById('payment-form').style.display = 'block';
});

document.getElementById('card-form').addEventListener('submit', function(event) {
    event.preventDefault();
    document.getElementById('payment-form').style.display = 'none';
    document.getElementById('success-message').style.display = 'block';
});
</script>
{% endblock %}
